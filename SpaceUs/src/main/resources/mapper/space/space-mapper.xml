<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="space">
<!-- Tag -->
	<select id="selectOneTag" resultMap="tagMap">
		select 
			*
		from 
			tag
		where 
			tag_name = #{ hashTag }
	</select>
	<resultMap type="tag" id="tagMap">
		<id column="tag_no" property="no"/>
		<result column="tag_name" property="tag"/>
	</resultMap>

 	<insert id="insertHashTag">
		insert into 
			tag 
		values(
			'TAG'||seq_tag_no.nextval, 
			#{hashTag}
		)
	</insert>
      

<!-- space -->
	<select id="selectOneSpaceNo" resultType="space">
		select 
			*
		from 
			space
		where 
			space_no = #{ spaceNo }
	</select>

	<select id="selectOneSpace" resultMap="spaceMap">
		select 
			*
		from 
			space
		where 
			business_license = #{ businessNo }
	</select>
	<resultMap type="space" id="spaceMap">
		<id column="space_no" property="spaceNo"/>
		<result column="category_no" property="categoryNo"/>
		<result column="member_email" property="memberEmail"/>
		<result column="business_license" property="businessNo"/>
		<result column="space_name" property="spaceName"/>
		<result column="address" property="address"/>
		<result column="space_phone" property="spacePhone"/>
		<result column="hourly_price" property="hourlyPrice"/>
		<result column="star_avg" property="starAvg"/>
		<result column="enroll_date" property="enrollDate"/>
		<result column="modification_date" property="modificationDate"/>
		<result column="views" property="views"/>
		<result column="like_cnt" property="likeCnt"/>
		<result column="status" property="status"/>
		<result column="account" property="account"/>
		<result column="content" property="content"/>
		<result column="bank" property="bank"/>
	</resultMap>
	<select resultMap="tagMap" id="selectListSpaceTag">
		select
			*
		from
			tag T join space_tag ST
			using(tag_no)
		where ST.space_no = #{ spaceNo } 
	</select>
	

</mapper>











